---
// Base Layout
import BaseLayout from '../layouts/BaseLayout.astro';

// Global Styles
import '../styles/myCustomStyles.css';



---

<BaseLayout>

	<script>
		
		// Random Pokemon IDs from gen1 to gen4
		const randomPokemon = Math.floor(Math.random() * 493) + 1;

		// Source
		const dataSource = 'https://pokeapi.co/api/v2/pokemon/' + randomPokemon;

		// Get page	elements
		const pokemonName = document.querySelector('#pokemonName');
		const pokemonTypes = document.querySelector('#pokemonTypes');
		const pokemonAbilities = document.querySelector('#pokemonAbilities');
		const pokemonArt = document.querySelector('#pokemonArt') as HTMLImageElement;
		const pokemonFrontSprite = document.querySelector('#pokemonFrontSprite') as HTMLImageElement;
		const pokemonBackSprite = document.querySelector('#pokemonBackSprite') as HTMLImageElement;

		// Fetch and Set
		fetch(dataSource)
		.then( response => response.json())
		.then( theData => {

			pokemonName.textContent = 'Name: ' + theData.species.name.charAt(0).toUpperCase() + theData.species.name.slice(1);
			pokemonTypes.textContent = 'Type: ' + theData.types.map( type => type.type.name ).join('/');
			pokemonAbilities.textContent = 'Abilities: ' + theData.abilities.map( ability => ability.ability.name ).join(', ');
			pokemonArt.src = theData.sprites.other.dream_world.front_default;
			pokemonFrontSprite.src = theData['sprites']['versions']['generation-v']['black-white']['animated']['front_default'];
			pokemonBackSprite.src = theData['sprites']['versions']['generation-v']['black-white']['animated']['back_default'];
			//^ properties with hyphens must be accessed with bracket notation

		});
	</script>

	<h1> Who's that pokemon? </h1>


	<h2 id="pokemonName"> Name: </h2>
	<img id="pokemonArt" src="" alt="Artwork">
	<h3 id="pokemonTypes"> Type: </h2>
	<h3 id="pokemonAbilities"> Abilities: </h2>
		<div class="block grid grid-cols-2 gap-0">
			<img id="pokemonFrontSprite" class="sprite" src="" alt="Front_Sprite">
			<img id="pokemonBackSprite" class="sprite" src="" alt="Back_Sprite">
		</div>

	
	

</BaseLayout>